<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <div th:replace="~{fragments/newHeader}"></div>

    <meta charset="UTF-8">
    <title th:text="#{settings.title}">Settings</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/styles.css">
    <style>
        body {
            background: url('/images/themes/img.png') no-repeat center fixed;
            background-size: cover;
        }
    </style>
</head>
<body>
<div class="d-flex justify-content-end p-3 position-absolute top-0 end-0">

</div>
<a th:href="@{/profile/{id}(id=${user.id})}" class="btn btn-primary position-fixed top-20 left-20">Back to Profile</a>

<div class="container mt-5">
    <h2 class="text-white display-4 font-weight-bold text-uppercase" th:text="#{settings.title}"></h2>

    <!-- First Name Form -->
    <div class="bg-white p-4 rounded shadow-sm mb-4">
        <h3 class="text-primary" th:text="#{firstName.change.title}"></h3>
        <form th:action="@{/profile/{id}/settings/updateFirstName(id=${user.id})}" method="post">
            <div class="form-group">
                <label for="firstName" th:text="#{firstName.change.label}"></label>
                <input type="text" id="firstName" name="firstName" class="form-control" th:value="${user.firstName}" required>
            </div>
            <button type="submit" class="btn btn-primary btn-block" th:text="#{firstName.change.button}"></button>
        </form>
    </div>

    <!-- Last Name Form -->
    <div class="bg-white p-4 rounded shadow-sm mb-4">
        <h3 class="text-primary" th:text="#{lastName.change.title}"></h3>
        <form th:action="@{/profile/{id}/settings/updateLastName(id=${user.id})}" method="post">
            <div class="form-group">
                <label for="lastName" th:text="#{lastName.change.label}"></label>
                <input type="text" id="lastName" name="lastName" class="form-control" th:value="${user.lastName}" required>
            </div>
            <button type="submit" class="btn btn-primary btn-block" th:text="#{lastName.change.button}"></button>
        </form>
    </div>

    <!-- Company Name Form -->
    <div class="bg-white p-4 rounded shadow-sm mb-4">
        <h3 class="text-primary" th:text="#{companyName.change.title}"></h3>
        <form th:action="@{/profile/{id}/settings/updateCompanyName(id=${user.id})}" method="post">
            <div class="form-group">
                <label for="companyName" th:text="#{companyName.change.label}"></label>
                <input type="text" id="companyName" name="companyName" class="form-control" th:value="${user.companyName}" required>
            </div>
            <button type="submit" class="btn btn-primary btn-block" th:text="#{companyName.change.button}"></button>
        </form>
    </div>

    <!-- Password Form -->
    <div class="bg-white p-4 rounded shadow-sm mb-4">
        <h3 class="text-primary" th:text="#{password.change.title}"></h3>
        <form th:action="@{/profile/{id}/settings/updatePassword(id=${user.id})}" method="post">
            <div class="form-group">
                <label for="password" th:text="#{password.change.new.label}"></label>
                <input type="password" id="password" name="password" class="form-control" required>
            </div>
            <div class="form-group">
                <label for="confirmPassword" th:text="#{password.change.confirm.label}"></label>
                <input type="password" id="confirmPassword" name="confirmPassword" class="form-control" required>
                <small th:if="${confirmPasswordError}" th:text="#{confirmPasswordError}" class="text-danger"></small>
            </div>
            <div class="form-group">
                <label for="currentPassword" th:text="#{password.change.current.label}"></label>
                <input type="password" id="currentPassword" name="currentPassword" class="form-control" required>
                <small th:if="${currentPasswordError}" th:text="#{currentPasswordError}" class="text-danger"></small>
            </div>
            <button type="submit" class="btn btn-primary btn-block" th:text="#{password.change.button}"></button>
        </form>
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
